


UML DIAGRAM:
+----------------------+
|      CipherSimple    |
+----------------------+
| - DEFAULT_KEY_PATH   |
+----------------------+
| + loadKeyLines(path) |
| + decipher(text,     |
|     actualLine,      |
|     cipherLine)      |
| + decipherUsingKey(  |
|     text, keyPath )  |
| - hasDuplicates(s)   |
+----------------------+


Pseudocode:
FUNCTION: loadKeyLines(keyFilePath)
Input: keyFilePath
Output: [actualLine, cipherLine] OR error
Open file at keyFilePath
Read first line → actualLine
Read second line → cipherLine
IF actualLine is missing OR cipherLine is missing
→ THROW "Invalid key: key file must contain 2 lines"
IF length(actualLine) != length(cipherLine)
→ THROW "Invalid key: lines must be same length"
IF hasDuplicates(actualLine) OR hasDuplicates(cipherLine)
→ THROW "Invalid key: duplicate characters in key"
RETURN [actualLine, cipherLine]

FUNCTION: hasDuplicates(s)
Input: s
Output: true if duplicates exist, else false
FOR i from 0 to length(s)-1:
ch = s[i]
IF firstIndexOf(ch in s) != lastIndexOf(ch in s)
→ RETURN true
RETURN false

FUNCTION: decipher(cipherText, actualLine, cipherLine)
Input: ciphered text, key lines
Output: deciphered plaintext
out = ""
FOR each character ch in cipherText:
idx = indexOf(ch in cipherLine)
IF idx == -1:
append ch to out (keep spaces/newlines/punctuation)
ELSE:
append actualLine[idx] to out
RETURN out

FUNCTION: decipherUsingKey(cipherText, optionalKeyPath)
Input: cipherText, optionalKeyPath
Output: plaintext OR error
IF optionalKeyPath is missing/blank:
keyPath = DEFAULT_KEY_PATH
ELSE:
keyPath = optionalKeyPath
[actualLine, cipherLine] = loadKeyLines(keyPath)
RETURN decipher(cipherText, actualLine, cipherLine)


TESTS:
TESTS (design-only, Week 3)
Key validation tests
Valid key loads
Given key.txt has 2 lines, same length, no duplicates
When loadKeyLines
Then returns [actualLine, cipherLine]
Missing second line
Given key.txt only has 1 line
When loadKeyLines
Then throws/returns error “must contain 2 lines”
Length mismatch
Given line1 length ≠ line2 length
When loadKeyLines
Then throws/returns error “same length”
Duplicates in actual line
Given actualLine contains a repeated character
When loadKeyLines
Then throws/returns error “duplicate characters”
Duplicates in cipher line
Given cipherLine contains a repeated character
When loadKeyLines
Then throws/returns error “duplicate characters”
Decipher tests
Basic decipher
Given actualLine="abc", cipherLine="bca"
When decipher "bca"
Then output "abc"
Keeps punctuation/spaces
Given a valid key
When decipher text containing "!", " ", "\n"
Then those characters stay unchanged
Empty string
When decipher ""
Then returns ""
Unknown character
Given key lines do not include '#'
When decipher includes '#'
Then '#' remains '#'
s
